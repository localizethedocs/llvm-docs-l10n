
<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The PDB Info Stream (aka the PDB Stream) &#8212; LLVM 6 說明文件</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/llvm-theme.css?v=4c4af0c1" />
    <script src="../_static/documentation_options.js?v=74f41d28"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/llvm-docs-l10n/PDB/PdbStream.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="The PDB TPI Stream" href="TpiStream.html" />
    <link rel="prev" title="The MSF File Format" href="MsfFile.html" />
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>
<div class="logo">
  <a href="../index.html">
    <img src="../_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="總索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="TpiStream.html" title="The PDB TPI Stream"
             accesskey="N">下一頁</a> |</li>
        <li class="right" >
          <a href="MsfFile.html" title="The MSF File Format"
             accesskey="P">上一頁</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">The PDB File Format</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">The PDB Info Stream (aka the PDB Stream)</a></li> 
      </ul>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="the-pdb-info-stream-aka-the-pdb-stream">
<h1>The PDB Info Stream (aka the PDB Stream)<a class="headerlink" href="#the-pdb-info-stream-aka-the-pdb-stream" title="連結到這個標頭">¶</a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#stream-header" id="id2">Stream Header</a></p></li>
<li><p><a class="reference internal" href="#matching-a-pdb-to-its-executable" id="id3">Matching a PDB to its executable</a></p></li>
</ul>
</nav>
<section id="stream-header">
<span id="pdb-stream-header"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">Stream Header</a><a class="headerlink" href="#stream-header" title="連結到這個標頭">¶</a></h2>
<p>At offset 0 of the PDB Stream is a header with the following layout:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">PdbStreamHeader</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">ulittle32_t</span><span class="w"> </span><span class="n">Version</span><span class="p">;</span>
<span class="w">  </span><span class="n">ulittle32_t</span><span class="w"> </span><span class="n">Signature</span><span class="p">;</span>
<span class="w">  </span><span class="n">ulittle32_t</span><span class="w"> </span><span class="n">Age</span><span class="p">;</span>
<span class="w">  </span><span class="n">Guid</span><span class="w"> </span><span class="n">UniqueId</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Version</strong> - A Value from the following enum:</p></li>
</ul>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PdbStreamVersion</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">VC2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19941610</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19950623</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC41</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19950814</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC50</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19960307</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC98</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19970604</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC70Dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19990604</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20000404</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC80</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20030901</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC110</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20091201</span><span class="p">,</span>
<span class="w">  </span><span class="n">VC140</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20140508</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
<p>While the meaning of this field appears to be obvious, in practice we have
never observed a value other than <code class="docutils literal notranslate"><span class="pre">VC70</span></code>, even with modern versions of
the toolchain, and it is unclear why the other values exist.  It is assumed
that certain aspects of the PDB stream's layout, and perhaps even that of
the other streams, will change if the value is something other than <code class="docutils literal notranslate"><span class="pre">VC70</span></code>.</p>
<ul class="simple">
<li><p><strong>Signature</strong> - A 32-bit time-stamp generated with a call to <code class="docutils literal notranslate"><span class="pre">time()</span></code> at
the time the PDB file is written.  Note that due to the inherent uniqueness
problems of using a timestamp with 1-second granularity, this field does not
really serve its intended purpose, and as such is typically ignored in favor
of the <code class="docutils literal notranslate"><span class="pre">Guid</span></code> field, described below.</p></li>
<li><p><strong>Age</strong> - The number of times the PDB file has been written.  This can be used
along with <code class="docutils literal notranslate"><span class="pre">Guid</span></code> to match the PDB to its corresponding executable.</p></li>
<li><p><strong>Guid</strong> - A 128-bit identifier guaranteed to be unique across space and time.
In general, this can be thought of as the result of calling the Win32 API
<a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa379205(v=vs.85).aspx">UuidCreate</a>,
although LLVM cannot rely on that, as it must work on non-Windows platforms.</p></li>
</ul>
</section>
<section id="matching-a-pdb-to-its-executable">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Matching a PDB to its executable</a><a class="headerlink" href="#matching-a-pdb-to-its-executable" title="連結到這個標頭">¶</a></h2>
<p>The linker is responsible for writing both the PDB and the final executable, and
as a result is the only entity capable of writing the information necessary to
match the PDB to the executable.</p>
<p>In order to accomplish this, the linker generates a guid for the PDB (or
re-uses the existing guid if it is linking incrementally) and increments the Age
field.</p>
<p>The executable is a PE/COFF file, and part of a PE/COFF file is the presence of
number of &quot;directories&quot;.  For our purposes here, we are interested in the &quot;debug
directory&quot;.  The exact format of a debug directory is described by the
<a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms680307(v=vs.85).aspx">IMAGE_DEBUG_DIRECTORY structure</a>.
For this particular case, the linker emits a debug directory of type
<code class="docutils literal notranslate"><span class="pre">IMAGE_DEBUG_TYPE_CODEVIEW</span></code>.  The format of this record is defined in
<code class="docutils literal notranslate"><span class="pre">llvm/DebugInfo/CodeView/CVDebugRecord.h</span></code>, but it suffices to say here only
that it includes the same <code class="docutils literal notranslate"><span class="pre">Guid</span></code> and <code class="docutils literal notranslate"><span class="pre">Age</span></code> fields.  At runtime, a
debugger or tool can scan the COFF executable image for the presence of
a debug directory of the correct type and verify that the Guid and Age match.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="總索引"
             >索引</a></li>
        <li class="right" >
          <a href="TpiStream.html" title="The PDB TPI Stream"
             >下一頁</a> |</li>
        <li class="right" >
          <a href="MsfFile.html" title="The MSF File Format"
             >上一頁</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >The PDB File Format</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">The PDB Info Stream (aka the PDB Stream)</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; 版權所有 2003-2025, LLVM Project.
      最後更新於 2025-10-28。
      使用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3 建立。
    </div>
  </body>
</html>