
<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>TableGen Language Reference &#8212; LLVM 10 說明文件</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/llvm-theme.css?v=4c4af0c1" />
    <script src="../_static/documentation_options.js?v=0c09651c"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/llvm-docs-l10n/TableGen/LangRef.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="TableGen Language Introduction" href="LangIntro.html" />
    <link rel="prev" title="TableGen BackEnds" href="BackEnds.html" />
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>
<div class="logo">
  <a href="../index.html">
    <img src="../_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="總索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="LangIntro.html" title="TableGen Language Introduction"
             accesskey="N">下一頁</a> |</li>
        <li class="right" >
          <a href="BackEnds.html" title="TableGen BackEnds"
             accesskey="P">上一頁</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="../UserGuides.html" >使用者指南</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">TableGen</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">TableGen Language Reference</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="../GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="../UserGuides.html">使用者指南</a></li>
    <li><a href="../Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="../Contributing.html">Contributing to LLVM</a></li>
    <li><a href="../HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="../GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="../GettingInvolved.html#discord">Discord</a></li>
    <li><a href="../GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="../FAQ.html">FAQ</a></li>
    <li><a href="../Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/TableGen/LangRef.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="tablegen-language-reference">
<h1>TableGen Language Reference<a class="headerlink" href="#tablegen-language-reference" title="連結到這個標頭">¶</a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">簡介</a></p></li>
<li><p><a class="reference internal" href="#notation" id="id3">Notation</a></p></li>
<li><p><a class="reference internal" href="#lexical-analysis" id="id4">Lexical Analysis</a></p></li>
<li><p><a class="reference internal" href="#syntax" id="id5">語法</a></p>
<ul>
<li><p><a class="reference internal" href="#classes" id="id6"><code class="docutils literal notranslate"><span class="pre">class</span></code>es</a></p></li>
<li><p><a class="reference internal" href="#declarations" id="id7">Declarations</a></p></li>
<li><p><a class="reference internal" href="#types" id="id8">Types</a></p></li>
<li><p><a class="reference internal" href="#values" id="id9">Values</a></p></li>
<li><p><a class="reference internal" href="#bodies" id="id10">Bodies</a></p></li>
<li><p><a class="reference internal" href="#def" id="id11"><code class="docutils literal notranslate"><span class="pre">def</span></code></a></p></li>
<li><p><a class="reference internal" href="#defm" id="id12"><code class="docutils literal notranslate"><span class="pre">defm</span></code></a></p></li>
<li><p><a class="reference internal" href="#defset" id="id13"><code class="docutils literal notranslate"><span class="pre">defset</span></code></a></p></li>
<li><p><a class="reference internal" href="#defvar" id="id14"><code class="docutils literal notranslate"><span class="pre">defvar</span></code></a></p></li>
<li><p><a class="reference internal" href="#foreach" id="id15"><code class="docutils literal notranslate"><span class="pre">foreach</span></code></a></p></li>
<li><p><a class="reference internal" href="#if" id="id16"><code class="docutils literal notranslate"><span class="pre">if</span></code></a></p></li>
<li><p><a class="reference internal" href="#top-level-let" id="id17">Top-Level <code class="docutils literal notranslate"><span class="pre">let</span></code></a></p></li>
<li><p><a class="reference internal" href="#multiclass" id="id18"><code class="docutils literal notranslate"><span class="pre">multiclass</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#preprocessing-support" id="id19">Preprocessing Support</a></p></li>
</ul>
</nav>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This document is extremely rough. If you find something lacking, please
fix it, file a documentation bug, or ask about it on llvm-dev.</p>
</div>
<section id="introduction">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">簡介</a><a class="headerlink" href="#introduction" title="連結到這個標頭">¶</a></h2>
<p>This document is meant to be a normative spec about the TableGen language
in and of itself (i.e. how to understand a given construct in terms of how
it affects the final set of records represented by the TableGen file). If
you are unsure if this document is really what you are looking for, please
read the <a class="reference internal" href="index.html"><span class="doc">introduction to TableGen</span></a> first.</p>
</section>
<section id="notation">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Notation</a><a class="headerlink" href="#notation" title="連結到這個標頭">¶</a></h2>
<p>The lexical and syntax notation used here is intended to imitate
<a class="reference external" href="http://docs.python.org/py3k/reference/introduction.html#notation">Python's</a>. In particular, for lexical definitions, the productions
operate at the character level and there is no implied whitespace between
elements. The syntax definitions operate at the token level, so there is
implied whitespace between tokens.</p>
</section>
<section id="lexical-analysis">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Lexical Analysis</a><a class="headerlink" href="#lexical-analysis" title="連結到這個標頭">¶</a></h2>
<p>TableGen supports BCPL (<code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">...</span></code>) and nestable C-style (<code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">*/</span></code>)
comments.  TableGen also provides simple <a class="reference internal" href="#preprocessing-support">Preprocessing Support</a>.</p>
<p>The following is a listing of the basic punctuation tokens:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- + [ ] { } ( ) &lt; &gt; : ; .  = ? #
</pre></div>
</div>
<p>Numeric literals take one of the following forms:</p>
<pre>
<strong id="grammar-token-TokInteger">TokInteger    </strong> ::=  <a class="reference internal" href="#grammar-token-DecimalInteger"><code class="xref docutils literal notranslate"><span class="pre">DecimalInteger</span></code></a> | <a class="reference internal" href="#grammar-token-HexInteger"><code class="xref docutils literal notranslate"><span class="pre">HexInteger</span></code></a> | <a class="reference internal" href="#grammar-token-BinInteger"><code class="xref docutils literal notranslate"><span class="pre">BinInteger</span></code></a>
<strong id="grammar-token-DecimalInteger">DecimalInteger</strong> ::=  [&quot;+&quot; | &quot;-&quot;] (&quot;0&quot;...&quot;9&quot;)+
<strong id="grammar-token-HexInteger">HexInteger    </strong> ::=  &quot;0x&quot; (&quot;0&quot;...&quot;9&quot; | &quot;a&quot;...&quot;f&quot; | &quot;A&quot;...&quot;F&quot;)+
<strong id="grammar-token-BinInteger">BinInteger    </strong> ::=  &quot;0b&quot; (&quot;0&quot; | &quot;1&quot;)+
</pre>
<p>One aspect to note is that the <a class="reference internal" href="#grammar-token-DecimalInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">DecimalInteger</span></code></a> token <em>includes</em> the
<code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code>, as opposed to having <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> be unary operators as
most languages do.</p>
<p>Also note that <a class="reference internal" href="#grammar-token-BinInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">BinInteger</span></code></a> creates a value of type <code class="docutils literal notranslate"><span class="pre">bits&lt;n&gt;</span></code>
(where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of bits).  This will implicitly convert to
integers when needed.</p>
<p>TableGen has identifier-like tokens:</p>
<pre>
<strong id="grammar-token-ualpha">ualpha       </strong> ::=  &quot;a&quot;...&quot;z&quot; | &quot;A&quot;...&quot;Z&quot; | &quot;_&quot;
<strong id="grammar-token-TokIdentifier">TokIdentifier</strong> ::=  (&quot;0&quot;...&quot;9&quot;)* <a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> (<a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> | &quot;0&quot;...&quot;9&quot;)*
<strong id="grammar-token-TokVarName">TokVarName   </strong> ::=  &quot;$&quot; <a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> (<a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> |  &quot;0&quot;...&quot;9&quot;)*
</pre>
<p>Note that unlike most languages, TableGen allows <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> to
begin with a number. In case of ambiguity, a token will be interpreted as a
numeric literal rather than an identifier.</p>
<p>TableGen also has two string-like literals:</p>
<pre>
<strong id="grammar-token-TokString">TokString      </strong> ::=  '&quot;' &lt;non-'&quot;' characters and C-like escapes&gt; '&quot;'
<strong id="grammar-token-TokCodeFragment">TokCodeFragment</strong> ::=  &quot;[{&quot; &lt;shortest text not containing &quot;}]&quot;&gt; &quot;}]&quot;
</pre>
<p><a class="reference internal" href="#grammar-token-TokCodeFragment"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokCodeFragment</span></code></a> is essentially a multiline string literal
delimited by <code class="docutils literal notranslate"><span class="pre">[{</span></code> and <code class="docutils literal notranslate"><span class="pre">}]</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>The current implementation accepts the following C-like escapes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\\ \<span class="s1">&#39; </span><span class="se">\&quot;</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> </span><span class="se">\n</span>
</pre></div>
</div>
</div>
<p>TableGen also has the following keywords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bit</span>   <span class="n">bits</span>      <span class="k">class</span><span class="w">   </span><span class="nc">code</span>         <span class="n">dag</span>
<span class="k">def</span><span class="w">   </span><span class="nf">foreach</span>   <span class="n">defm</span>    <span class="n">field</span>        <span class="ow">in</span>
<span class="nb">int</span>   <span class="n">let</span>       <span class="nb">list</span>    <span class="n">multiclass</span>   <span class="n">string</span>
<span class="k">if</span>    <span class="n">then</span>      <span class="k">else</span>
</pre></div>
</div>
<p>TableGen also has &quot;bang operators&quot; which have a
wide variety of meanings:</p>
<pre>
<strong id="grammar-token-BangOperator">BangOperator</strong> ::=  one of
                 !eq     !if      !head    !tail      !con
                 !add    !shl     !sra     !srl       !and
                 !or     !empty   !subst   !foreach   !strconcat
                 !cast   !listconcat       !size      !foldl
                 !isa    !dag     !le      !lt        !ge
                 !gt     !ne      !mul     !listsplat !setop
                 !getop
</pre>
<p>TableGen also has !cond operator that needs a slightly different
syntax compared to other &quot;bang operators&quot;:</p>
<pre>
<strong id="grammar-token-CondOperator">CondOperator</strong> ::=  !cond
</pre>
</section>
<section id="syntax">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">語法</a><a class="headerlink" href="#syntax" title="連結到這個標頭">¶</a></h2>
<p>TableGen has an <code class="docutils literal notranslate"><span class="pre">include</span></code> mechanism. It does not play a role in the
syntax per se, since it is lexically replaced with the contents of the
included file.</p>
<pre>
<strong id="grammar-token-IncludeDirective">IncludeDirective</strong> ::=  &quot;include&quot; <a class="reference internal" href="#grammar-token-TokString"><code class="xref docutils literal notranslate"><span class="pre">TokString</span></code></a>
</pre>
<p>TableGen's top-level production consists of &quot;objects&quot;.</p>
<pre>
<strong id="grammar-token-TableGenFile">TableGenFile</strong> ::=  <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>*
<strong id="grammar-token-Object">Object      </strong> ::=  <a class="reference internal" href="#grammar-token-Class"><code class="xref docutils literal notranslate"><span class="pre">Class</span></code></a> | <a class="reference internal" href="#grammar-token-Def"><code class="xref docutils literal notranslate"><span class="pre">Def</span></code></a> | <a class="reference internal" href="#grammar-token-Defm"><code class="xref docutils literal notranslate"><span class="pre">Defm</span></code></a> | <a class="reference internal" href="#grammar-token-Defset"><code class="xref docutils literal notranslate"><span class="pre">Defset</span></code></a> | <a class="reference internal" href="#grammar-token-Defvar"><code class="xref docutils literal notranslate"><span class="pre">Defvar</span></code></a> | <a class="reference internal" href="#grammar-token-Let"><code class="xref docutils literal notranslate"><span class="pre">Let</span></code></a> |
</pre>
<section id="classes">
<h3><a class="toc-backref" href="#id6" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">class</span></code>es</a><a class="headerlink" href="#classes" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Class">Class          </strong> ::=  &quot;class&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a>] <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref docutils literal notranslate"><span class="pre">ObjectBody</span></code></a>
<strong id="grammar-token-TemplateArgList">TemplateArgList</strong> ::=  &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a>)* &quot;&gt;&quot;
</pre>
<p>A <code class="docutils literal notranslate"><span class="pre">class</span></code> declaration creates a record which other records can inherit
from. A class can be parametrized by a list of &quot;template arguments&quot;, whose
values can be used in the class body.</p>
<p>A given class can only be defined once. A <code class="docutils literal notranslate"><span class="pre">class</span></code> declaration is
considered to define the class if any of the following is true:</p>
<ol class="arabic simple">
<li><p>The <a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref std std-token docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a> is present.</p></li>
<li><p>The <a class="reference internal" href="#grammar-token-Body"><code class="xref std std-token docutils literal notranslate"><span class="pre">Body</span></code></a> in the <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref std std-token docutils literal notranslate"><span class="pre">ObjectBody</span></code></a> is present and is not empty.</p></li>
<li><p>The <a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref std std-token docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> in the <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref std std-token docutils literal notranslate"><span class="pre">ObjectBody</span></code></a> is present.</p></li>
</ol>
<p>You can declare an empty class by giving an empty <a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref std std-token docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a>
and an empty <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref std std-token docutils literal notranslate"><span class="pre">ObjectBody</span></code></a>. This can serve as a restricted form of
forward declaration: note that records deriving from the forward-declared
class will inherit no fields from it since the record expansion is done
when the record is parsed.</p>
<p>Every class has an implicit template argument called <code class="docutils literal notranslate"><span class="pre">NAME</span></code>, which is set
to the name of the instantiating <code class="docutils literal notranslate"><span class="pre">def</span></code> or <code class="docutils literal notranslate"><span class="pre">defm</span></code>. The result is undefined
if the class is instantiated by an anonymous record.</p>
</section>
<section id="declarations">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Declarations</a><a class="headerlink" href="#declarations" title="連結到這個標頭">¶</a></h3>
<p>The declaration syntax is pretty much what you would expect as a C++
programmer.</p>
<pre>
<strong id="grammar-token-Declaration">Declaration</strong> ::=  <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [&quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>]
</pre>
<p>It assigns the value to the identifier.</p>
</section>
<section id="types">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Types</a><a class="headerlink" href="#types" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Type">Type   </strong> ::=  &quot;string&quot; | &quot;code&quot; | &quot;bit&quot; | &quot;int&quot; | &quot;dag&quot;
            | &quot;bits&quot; &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a> &quot;&gt;&quot;
            | &quot;list&quot; &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> &quot;&gt;&quot;
            | <a class="reference internal" href="#grammar-token-ClassID"><code class="xref docutils literal notranslate"><span class="pre">ClassID</span></code></a>
<strong id="grammar-token-ClassID">ClassID</strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
</pre>
<p>Both <code class="docutils literal notranslate"><span class="pre">string</span></code> and <code class="docutils literal notranslate"><span class="pre">code</span></code> correspond to the string type; the difference
is purely to indicate programmer intention.</p>
<p>The <a class="reference internal" href="#grammar-token-ClassID"><code class="xref std std-token docutils literal notranslate"><span class="pre">ClassID</span></code></a> must identify a class that has been previously
declared or defined.</p>
</section>
<section id="values">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Values</a><a class="headerlink" href="#values" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Value">Value      </strong> ::=  <a class="reference internal" href="#grammar-token--8"><code class="xref docutils literal notranslate"><span class="pre">SimpleValue</span></code></a> <a class="reference internal" href="#grammar-token-ValueSuffix"><code class="xref docutils literal notranslate"><span class="pre">ValueSuffix</span></code></a>*
<strong id="grammar-token-ValueSuffix">ValueSuffix</strong> ::=  &quot;{&quot; <a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a> &quot;}&quot;
                | &quot;[&quot; <a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a> &quot;]&quot;
                | &quot;.&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
<strong id="grammar-token-RangeList">RangeList  </strong> ::=  <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref docutils literal notranslate"><span class="pre">RangePiece</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref docutils literal notranslate"><span class="pre">RangePiece</span></code></a>)*
<strong id="grammar-token-RangePiece">RangePiece </strong> ::=  <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
                | <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a> &quot;-&quot; <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
                | <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a> <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
</pre>
<p>The peculiar last form of <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref std std-token docutils literal notranslate"><span class="pre">RangePiece</span></code></a> is due to the fact that the
&quot;<code class="docutils literal notranslate"><span class="pre">-</span></code>&quot; is included in the <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokInteger</span></code></a>, hence <code class="docutils literal notranslate"><span class="pre">1-5</span></code> gets lexed as
two consecutive <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokInteger</span></code></a>'s, with values <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">-5</span></code>,
instead of &quot;1&quot;, &quot;-&quot;, and &quot;5&quot;.
The <a class="reference internal" href="#grammar-token-RangeList"><code class="xref std std-token docutils literal notranslate"><span class="pre">RangeList</span></code></a> can be thought of as specifying &quot;list slice&quot; in some
contexts.</p>
<p><a class="reference internal" href="#grammar-token--8"><code class="xref std std-token docutils literal notranslate"><span class="pre">SimpleValue</span></code></a> has a number of forms:</p>
<pre>
<strong id="grammar-token-SimpleValue">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
</pre>
<p>The value will be the variable referenced by the identifier. It can be one
of:</p>
<ul>
<li><p>name of a <code class="docutils literal notranslate"><span class="pre">def</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">Bar</span> <span class="p">:</span> <span class="n">SomeClass</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">X</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">Foo</span> <span class="p">{</span>
  <span class="n">SomeClass</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>value local to a <code class="docutils literal notranslate"><span class="pre">def</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">Foo</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Bar</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Values defined in superclasses can be accessed the same way.</p>
</li>
<li><p>a template arg of a <code class="docutils literal notranslate"><span class="pre">class</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="o">&lt;</span><span class="nb">int</span> <span class="n">Bar</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>value local to a <code class="docutils literal notranslate"><span class="pre">class</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Bar</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>a template arg to a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">multiclass</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="nb">int</span> <span class="n">Bar</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">def</span><span class="w"> </span><span class="p">:</span> <span class="n">SomeClass</span><span class="o">&lt;</span><span class="n">Bar</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>the iteration variable of a <code class="docutils literal notranslate"><span class="pre">foreach</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">i</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">foreach</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">-</span><span class="mi">5</span> <span class="ow">in</span>
<span class="k">def</span><span class="w"> </span><span class="nf">Foo</span><span class="c1">#i;</span>
</pre></div>
</div>
</li>
<li><p>a variable defined by <code class="docutils literal notranslate"><span class="pre">defset</span></code> or <code class="docutils literal notranslate"><span class="pre">defvar</span></code></p></li>
<li><p>the implicit template argument <code class="docutils literal notranslate"><span class="pre">NAME</span></code> in a <code class="docutils literal notranslate"><span class="pre">class</span></code> or <code class="docutils literal notranslate"><span class="pre">multiclass</span></code></p></li>
</ul>
<pre>
<strong id="grammar-token--0">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
</pre>
<p>This represents the numeric value of the integer.</p>
<pre>
<strong id="grammar-token--1">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokString"><code class="xref docutils literal notranslate"><span class="pre">TokString</span></code></a>+
</pre>
<p>Multiple adjacent string literals are concatenated like in C/C++. The value
is the concatenation of the strings.</p>
<pre>
<strong id="grammar-token--2">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokCodeFragment"><code class="xref docutils literal notranslate"><span class="pre">TokCodeFragment</span></code></a>
</pre>
<p>The value is the string value of the code fragment.</p>
<pre>
<strong id="grammar-token--3">SimpleValue</strong> ::=  &quot;?&quot;
</pre>
<p><code class="docutils literal notranslate"><span class="pre">?</span></code> represents an &quot;unset&quot; initializer.</p>
<pre>
<strong id="grammar-token--4">SimpleValue</strong> ::=  &quot;{&quot; <a class="reference internal" href="#grammar-token-ValueList"><code class="xref docutils literal notranslate"><span class="pre">ValueList</span></code></a> &quot;}&quot;
<strong id="grammar-token-ValueList">ValueList  </strong> ::=  [<a class="reference internal" href="#grammar-token-ValueListNE"><code class="xref docutils literal notranslate"><span class="pre">ValueListNE</span></code></a>]
<strong id="grammar-token-ValueListNE">ValueListNE</strong> ::=  <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>)*
</pre>
<p>This represents a sequence of bits, as would be used to initialize a
<code class="docutils literal notranslate"><span class="pre">bits&lt;n&gt;</span></code> field (where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of bits).</p>
<pre>
<strong id="grammar-token--5">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-ClassID"><code class="xref docutils literal notranslate"><span class="pre">ClassID</span></code></a> &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-ValueListNE"><code class="xref docutils literal notranslate"><span class="pre">ValueListNE</span></code></a> &quot;&gt;&quot;
</pre>
<p>This generates a new anonymous record definition (as would be created by an
unnamed <code class="docutils literal notranslate"><span class="pre">def</span></code> inheriting from the given class with the given template
arguments) and the value is the value of that record definition.</p>
<pre>
<strong id="grammar-token--6">SimpleValue</strong> ::=  &quot;[&quot; <a class="reference internal" href="#grammar-token-ValueList"><code class="xref docutils literal notranslate"><span class="pre">ValueList</span></code></a> &quot;]&quot; [&quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> &quot;&gt;&quot;]
</pre>
<p>A list initializer. The optional <a class="reference internal" href="#grammar-token-Type"><code class="xref std std-token docutils literal notranslate"><span class="pre">Type</span></code></a> can be used to indicate a
specific element type, otherwise the element type will be deduced from the
given values.</p>
<pre>
<strong id="grammar-token--7">SimpleValue</strong> ::=  &quot;(&quot; <a class="reference internal" href="#grammar-token-DagArg"><code class="xref docutils literal notranslate"><span class="pre">DagArg</span></code></a> [<a class="reference internal" href="#grammar-token-DagArgList"><code class="xref docutils literal notranslate"><span class="pre">DagArgList</span></code></a>] &quot;)&quot;
<strong id="grammar-token-DagArgList">DagArgList </strong> ::=  <a class="reference internal" href="#grammar-token-DagArg"><code class="xref docutils literal notranslate"><span class="pre">DagArg</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-DagArg"><code class="xref docutils literal notranslate"><span class="pre">DagArg</span></code></a>)*
<strong id="grammar-token-DagArg">DagArg     </strong> ::=  <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> [&quot;:&quot; <a class="reference internal" href="#grammar-token-TokVarName"><code class="xref docutils literal notranslate"><span class="pre">TokVarName</span></code></a>] | <a class="reference internal" href="#grammar-token-TokVarName"><code class="xref docutils literal notranslate"><span class="pre">TokVarName</span></code></a>
</pre>
<p>The initial <a class="reference internal" href="#grammar-token-DagArg"><code class="xref std std-token docutils literal notranslate"><span class="pre">DagArg</span></code></a> is called the &quot;operator&quot; of the dag.</p>
<pre>
<strong id="grammar-token--8">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-BangOperator"><code class="xref docutils literal notranslate"><span class="pre">BangOperator</span></code></a> [&quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> &quot;&gt;&quot;] &quot;(&quot; <a class="reference internal" href="#grammar-token-ValueListNE"><code class="xref docutils literal notranslate"><span class="pre">ValueListNE</span></code></a> &quot;)&quot;
                | <a class="reference internal" href="#grammar-token-CondOperator"><code class="xref docutils literal notranslate"><span class="pre">CondOperator</span></code></a> &quot;(&quot; <a class="reference internal" href="#grammar-token-CondVal"><code class="xref docutils literal notranslate"><span class="pre">CondVal</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-CondVal"><code class="xref docutils literal notranslate"><span class="pre">CondVal</span></code></a>)* &quot;)&quot;
<strong id="grammar-token-CondVal">CondVal    </strong> ::=  <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>
</pre>
</section>
<section id="bodies">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Bodies</a><a class="headerlink" href="#bodies" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-ObjectBody">ObjectBody     </strong> ::=  <a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> <a class="reference internal" href="#grammar-token-Body"><code class="xref docutils literal notranslate"><span class="pre">Body</span></code></a>
<strong id="grammar-token-BaseClassList">BaseClassList  </strong> ::=  [&quot;:&quot; <a class="reference internal" href="#grammar-token-BaseClassListNE"><code class="xref docutils literal notranslate"><span class="pre">BaseClassListNE</span></code></a>]
<strong id="grammar-token-BaseClassListNE">BaseClassListNE</strong> ::=  <a class="reference internal" href="#grammar-token-SubClassRef"><code class="xref docutils literal notranslate"><span class="pre">SubClassRef</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-SubClassRef"><code class="xref docutils literal notranslate"><span class="pre">SubClassRef</span></code></a>)*
<strong id="grammar-token-SubClassRef">SubClassRef    </strong> ::=  (<a class="reference internal" href="#grammar-token-ClassID"><code class="xref docutils literal notranslate"><span class="pre">ClassID</span></code></a> | <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref docutils literal notranslate"><span class="pre">MultiClassID</span></code></a>) [&quot;&lt;&quot; <a class="reference internal" href="#grammar-token-ValueList"><code class="xref docutils literal notranslate"><span class="pre">ValueList</span></code></a> &quot;&gt;&quot;]
<strong id="grammar-token-DefmID">DefmID         </strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
</pre>
<p>The version with the <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref std std-token docutils literal notranslate"><span class="pre">MultiClassID</span></code></a> is only valid in the
<a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref std std-token docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> of a <code class="docutils literal notranslate"><span class="pre">defm</span></code>.
The <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref std std-token docutils literal notranslate"><span class="pre">MultiClassID</span></code></a> should be the name of a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>.</p>
<p>It is after parsing the base class list that the &quot;let stack&quot; is applied.</p>
<pre>
<strong id="grammar-token-Body">Body    </strong> ::=  &quot;;&quot; | &quot;{&quot; BodyList &quot;}&quot;
<strong id="grammar-token-BodyList">BodyList</strong> ::=  BodyItem*
<strong id="grammar-token-BodyItem">BodyItem</strong> ::=  <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a> &quot;;&quot;
             | &quot;let&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [ &quot;{&quot; <a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a> &quot;}&quot; ] &quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> &quot;;&quot;
             | <a class="reference internal" href="#grammar-token-Defvar"><code class="xref docutils literal notranslate"><span class="pre">Defvar</span></code></a>
</pre>
<p>The <code class="docutils literal notranslate"><span class="pre">let</span></code> form allows overriding the value of an inherited field.</p>
</section>
<section id="def">
<h3><a class="toc-backref" href="#id11" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">def</span></code></a><a class="headerlink" href="#def" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Def">Def</strong> ::=  &quot;def&quot; [<a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>] <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref docutils literal notranslate"><span class="pre">ObjectBody</span></code></a>
</pre>
<p>Defines a record whose name is given by the optional <a class="reference internal" href="#grammar-token-Value"><code class="xref std std-token docutils literal notranslate"><span class="pre">Value</span></code></a>. The value
is parsed in a special mode where global identifiers (records and variables
defined by <code class="docutils literal notranslate"><span class="pre">defset</span></code>, and variables defined at global scope by <code class="docutils literal notranslate"><span class="pre">defvar</span></code>) are
not recognized, and all unrecognized identifiers are interpreted as strings.</p>
<p>If no name is given, the record is anonymous. The final name of anonymous
records is undefined, but globally unique.</p>
<p>Special handling occurs if this <code class="docutils literal notranslate"><span class="pre">def</span></code> appears inside a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code> or
a <code class="docutils literal notranslate"><span class="pre">foreach</span></code>.</p>
<p>When a non-anonymous record is defined in a multiclass and the given name
does not contain a reference to the implicit template argument <code class="docutils literal notranslate"><span class="pre">NAME</span></code>, such
a reference will automatically be prepended. That is, the following are
equivalent inside a multiclass:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">Foo</span><span class="p">;</span>
<span class="k">def</span><span class="w"> </span><span class="nf">NAME</span><span class="c1">#Foo;</span>
</pre></div>
</div>
</section>
<section id="defm">
<h3><a class="toc-backref" href="#id12" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">defm</span></code></a><a class="headerlink" href="#defm" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Defm">Defm</strong> ::=  &quot;defm&quot; [<a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>] &quot;:&quot; <a class="reference internal" href="#grammar-token-BaseClassListNE"><code class="xref docutils literal notranslate"><span class="pre">BaseClassListNE</span></code></a> &quot;;&quot;
</pre>
<p>The <a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref std std-token docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> is a list of at least one <code class="docutils literal notranslate"><span class="pre">multiclass</span></code> and any
number of <code class="docutils literal notranslate"><span class="pre">class</span></code>'s. The <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>'s must occur before any <code class="docutils literal notranslate"><span class="pre">class</span></code>'s.</p>
<p>Instantiates all records defined in all given <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>'s and adds the
given <code class="docutils literal notranslate"><span class="pre">class</span></code>'s as superclasses.</p>
<p>The name is parsed in the same special mode used by <code class="docutils literal notranslate"><span class="pre">def</span></code>. If the name is
missing, a globally unique string is used instead (but instantiated records
are not considered to be anonymous, unless they were originally defined by an
anonymous <code class="docutils literal notranslate"><span class="pre">def</span></code>) That is, the following have different semantics:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">defm</span> <span class="p">:</span> <span class="n">SomeMultiClass</span><span class="o">&lt;...&gt;</span><span class="p">;</span>    <span class="o">//</span> <span class="n">some</span> <span class="n">globally</span> <span class="n">unique</span> <span class="n">name</span>
<span class="n">defm</span> <span class="s2">&quot;&quot;</span> <span class="p">:</span> <span class="n">SomeMultiClass</span><span class="o">&lt;...&gt;</span><span class="p">;</span> <span class="o">//</span> <span class="n">empty</span> <span class="n">name</span> <span class="n">string</span>
</pre></div>
</div>
<p>When it occurs inside a multiclass, the second variant is equivalent to
<code class="docutils literal notranslate"><span class="pre">defm</span> <span class="pre">NAME</span> <span class="pre">:</span> <span class="pre">...</span></code>. More generally, when <code class="docutils literal notranslate"><span class="pre">defm</span></code> occurs in a multiclass and
its name does not contain a reference to the implicit template argument
<code class="docutils literal notranslate"><span class="pre">NAME</span></code>, such a reference will automatically be prepended. That is, the
following are equivalent inside a multiclass:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">defm</span> <span class="n">Foo</span> <span class="p">:</span> <span class="n">SomeMultiClass</span><span class="o">&lt;...&gt;</span><span class="p">;</span>
<span class="n">defm</span> <span class="n">NAME</span><span class="c1">#Foo : SomeMultiClass&lt;...&gt;;</span>
</pre></div>
</div>
</section>
<section id="defset">
<h3><a class="toc-backref" href="#id13" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">defset</span></code></a><a class="headerlink" href="#defset" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Defset">Defset</strong> ::=  &quot;defset&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> &quot;=&quot; &quot;{&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>* &quot;}&quot;
</pre>
<p>All records defined inside the braces via <code class="docutils literal notranslate"><span class="pre">def</span></code> and <code class="docutils literal notranslate"><span class="pre">defm</span></code> are collected
in a globally accessible list of the given name (in addition to being added
to the global collection of records as usual). Anonymous records created inside
initializier expressions using the <code class="docutils literal notranslate"><span class="pre">Class&lt;args...&gt;</span></code> syntax are never collected
in a defset.</p>
<p>The given type must be <code class="docutils literal notranslate"><span class="pre">list&lt;A&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">A</span></code> is some class. It is an error
to define a record (via <code class="docutils literal notranslate"><span class="pre">def</span></code> or <code class="docutils literal notranslate"><span class="pre">defm</span></code>) inside the braces which doesn't
derive from <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
</section>
<section id="defvar">
<h3><a class="toc-backref" href="#id14" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">defvar</span></code></a><a class="headerlink" href="#defvar" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Defvar">Defvar</strong> ::=  &quot;defvar&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> &quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> &quot;;&quot;
</pre>
<p>The identifier on the left of the <code class="docutils literal notranslate"><span class="pre">=</span></code> is defined to be a global or local
variable, whose value is given by the expression on the right of the <code class="docutils literal notranslate"><span class="pre">=</span></code>. The
type of the variable is automatically inferred.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">defvar</span></code> statement at the top level of the file defines a global variable,
in the same scope used by <code class="docutils literal notranslate"><span class="pre">defset</span></code>. If a <code class="docutils literal notranslate"><span class="pre">defvar</span></code> statement appears inside
any other construction, including classes, multiclasses and <code class="docutils literal notranslate"><span class="pre">foreach</span></code>
statements, then the variable is scoped to the inside of that construction
only.</p>
<p>In contexts where the <code class="docutils literal notranslate"><span class="pre">defvar</span></code> statement will be encountered multiple times,
the definition is re-evaluated for each instance. For example, a <code class="docutils literal notranslate"><span class="pre">defvar</span></code>
inside a <code class="docutils literal notranslate"><span class="pre">foreach</span></code> can construct a value based on the iteration variable,
which will be different every time round the loop; a <code class="docutils literal notranslate"><span class="pre">defvar</span></code> inside a
templated class or multiclass can have a definition depending on the template
parameters.</p>
<p>Variables local to a <code class="docutils literal notranslate"><span class="pre">foreach</span></code> go out of scope at the end of each loop
iteration, so their previous value is not accessible in the next iteration. (It
won't work to <code class="docutils literal notranslate"><span class="pre">defvar</span> <span class="pre">i=!add(i,1)</span></code> each time you go round the loop.)</p>
<p>In general, <code class="docutils literal notranslate"><span class="pre">defvar</span></code> variables are immutable once they are defined. It is an
error to define the same variable name twice in the same scope (but legal to
shadow the first definition temporarily in an inner scope).</p>
</section>
<section id="foreach">
<h3><a class="toc-backref" href="#id15" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">foreach</span></code></a><a class="headerlink" href="#foreach" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Foreach">Foreach           </strong> ::=  &quot;foreach&quot; <a class="reference internal" href="#grammar-token-ForeachDeclaration"><code class="xref docutils literal notranslate"><span class="pre">ForeachDeclaration</span></code></a> &quot;in&quot; &quot;{&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>* &quot;}&quot;
                       | &quot;foreach&quot; <a class="reference internal" href="#grammar-token-ForeachDeclaration"><code class="xref docutils literal notranslate"><span class="pre">ForeachDeclaration</span></code></a> &quot;in&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>
<strong id="grammar-token-ForeachDeclaration">ForeachDeclaration</strong> ::=  ID &quot;=&quot; ( &quot;{&quot; <a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a> &quot;}&quot; | <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref docutils literal notranslate"><span class="pre">RangePiece</span></code></a> | <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> )
</pre>
<p>The value assigned to the variable in the declaration is iterated over and
the object or object list is reevaluated with the variable set at each
iterated value.</p>
<p>Note that the productions involving RangeList and RangePiece have precedence
over the more generic value parsing based on the first token.</p>
</section>
<section id="if">
<h3><a class="toc-backref" href="#id16" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">if</span></code></a><a class="headerlink" href="#if" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-If">If    </strong> ::=  &quot;if&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> &quot;then&quot; <a class="reference internal" href="#grammar-token-IfBody"><code class="xref docutils literal notranslate"><span class="pre">IfBody</span></code></a>
           | &quot;if&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> &quot;then&quot; <a class="reference internal" href="#grammar-token-IfBody"><code class="xref docutils literal notranslate"><span class="pre">IfBody</span></code></a> &quot;else&quot; <a class="reference internal" href="#grammar-token-IfBody"><code class="xref docutils literal notranslate"><span class="pre">IfBody</span></code></a>
<strong id="grammar-token-IfBody">IfBody</strong> ::=  &quot;{&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>* &quot;}&quot; | <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>
</pre>
<p>The value expression after the <code class="docutils literal notranslate"><span class="pre">if</span></code> keyword is evaluated, and if it evaluates
to true (in the same sense used by the <code class="docutils literal notranslate"><span class="pre">!if</span></code> operator), then the object
definition(s) after the <code class="docutils literal notranslate"><span class="pre">then</span></code> keyword are executed. Otherwise, if there is
an <code class="docutils literal notranslate"><span class="pre">else</span></code> keyword, the definition(s) after the <code class="docutils literal notranslate"><span class="pre">else</span></code> are executed instead.</p>
<p>Because the braces around the <code class="docutils literal notranslate"><span class="pre">then</span></code> clause are optional, this grammar rule
has the usual ambiguity about dangling <code class="docutils literal notranslate"><span class="pre">else</span></code> clauses, and it is resolved in
the usual way: in a case like <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">v1</span> <span class="pre">then</span> <span class="pre">if</span> <span class="pre">v2</span> <span class="pre">then</span> <span class="pre">{...}</span> <span class="pre">else</span> <span class="pre">{...}</span></code>, the
<code class="docutils literal notranslate"><span class="pre">else</span></code> binds to the inner <code class="docutils literal notranslate"><span class="pre">if</span></code> rather than the outer one.</p>
</section>
<section id="top-level-let">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Top-Level <code class="docutils literal notranslate"><span class="pre">let</span></code></a><a class="headerlink" href="#top-level-let" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-Let">Let    </strong> ::=   &quot;let&quot; <a class="reference internal" href="#grammar-token-LetList"><code class="xref docutils literal notranslate"><span class="pre">LetList</span></code></a> &quot;in&quot; &quot;{&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>* &quot;}&quot;
            | &quot;let&quot; <a class="reference internal" href="#grammar-token-LetList"><code class="xref docutils literal notranslate"><span class="pre">LetList</span></code></a> &quot;in&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>
<strong id="grammar-token-LetList">LetList</strong> ::=  <a class="reference internal" href="#grammar-token-LetItem"><code class="xref docutils literal notranslate"><span class="pre">LetItem</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-LetItem"><code class="xref docutils literal notranslate"><span class="pre">LetItem</span></code></a>)*
<strong id="grammar-token-LetItem">LetItem</strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a>] &quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>
</pre>
<p>This is effectively equivalent to <code class="docutils literal notranslate"><span class="pre">let</span></code> inside the body of a record
except that it applies to multiple records at a time. The bindings are
applied at the end of parsing the base classes of a record.</p>
</section>
<section id="multiclass">
<h3><a class="toc-backref" href="#id18" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">multiclass</span></code></a><a class="headerlink" href="#multiclass" title="連結到這個標頭">¶</a></h3>
<pre>
<strong id="grammar-token-MultiClass">MultiClass        </strong> ::=  &quot;multiclass&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a>]
                        [&quot;:&quot; <a class="reference internal" href="#grammar-token-BaseMultiClassList"><code class="xref docutils literal notranslate"><span class="pre">BaseMultiClassList</span></code></a>] &quot;{&quot; <a class="reference internal" href="#grammar-token-MultiClassObject"><code class="xref docutils literal notranslate"><span class="pre">MultiClassObject</span></code></a>+ &quot;}&quot;
<strong id="grammar-token-BaseMultiClassList">BaseMultiClassList</strong> ::=  <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref docutils literal notranslate"><span class="pre">MultiClassID</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref docutils literal notranslate"><span class="pre">MultiClassID</span></code></a>)*
<strong id="grammar-token-MultiClassID">MultiClassID      </strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
<strong id="grammar-token-MultiClassObject">MultiClassObject  </strong> ::=  <a class="reference internal" href="#grammar-token-Def"><code class="xref docutils literal notranslate"><span class="pre">Def</span></code></a> | <a class="reference internal" href="#grammar-token-Defm"><code class="xref docutils literal notranslate"><span class="pre">Defm</span></code></a> | <a class="reference internal" href="#grammar-token-Let"><code class="xref docutils literal notranslate"><span class="pre">Let</span></code></a> | <a class="reference internal" href="#grammar-token-Foreach"><code class="xref docutils literal notranslate"><span class="pre">Foreach</span></code></a>
</pre>
</section>
</section>
<section id="preprocessing-support">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Preprocessing Support</a><a class="headerlink" href="#preprocessing-support" title="連結到這個標頭">¶</a></h2>
<p>TableGen's embedded preprocessor is only intended for conditional compilation.
It supports the following directives:</p>
<pre>
<strong id="grammar-token-LineBegin">LineBegin                </strong> ::=  ^
<strong id="grammar-token-LineEnd">LineEnd                  </strong> ::=  &quot;\n&quot; | &quot;\r&quot; | EOF
<strong id="grammar-token-WhiteSpace">WhiteSpace               </strong> ::=  &quot; &quot; | &quot;\t&quot;
<strong id="grammar-token-CStyleComment">CStyleComment            </strong> ::=  &quot;/*&quot; (.* - &quot;*/&quot;) &quot;*/&quot;
<strong id="grammar-token-BCPLComment">BCPLComment              </strong> ::=  &quot;//&quot; (.* - <a class="reference internal" href="#grammar-token-LineEnd"><code class="xref docutils literal notranslate"><span class="pre">LineEnd</span></code></a>) <a class="reference internal" href="#grammar-token-LineEnd"><code class="xref docutils literal notranslate"><span class="pre">LineEnd</span></code></a>
<strong id="grammar-token-WhiteSpaceOrCStyleComment">WhiteSpaceOrCStyleComment</strong> ::=  <a class="reference internal" href="#grammar-token-WhiteSpace"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpace</span></code></a> | <a class="reference internal" href="#grammar-token-CStyleComment"><code class="xref docutils literal notranslate"><span class="pre">CStyleComment</span></code></a>
<strong id="grammar-token-WhiteSpaceOrAnyComment">WhiteSpaceOrAnyComment   </strong> ::=  <a class="reference internal" href="#grammar-token-WhiteSpace"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpace</span></code></a> | <a class="reference internal" href="#grammar-token-CStyleComment"><code class="xref docutils literal notranslate"><span class="pre">CStyleComment</span></code></a> | <a class="reference internal" href="#grammar-token-BCPLComment"><code class="xref docutils literal notranslate"><span class="pre">BCPLComment</span></code></a>
<strong id="grammar-token-MacroName">MacroName                </strong> ::=  <a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> (<a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> | &quot;0&quot;...&quot;9&quot;)*
<strong id="grammar-token-PrepDefine">PrepDefine               </strong> ::=  <a class="reference internal" href="#grammar-token-LineBegin"><code class="xref docutils literal notranslate"><span class="pre">LineBegin</span></code></a> (<a class="reference internal" href="#grammar-token-WhiteSpaceOrCStyleComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrCStyleComment</span></code></a>)*
                               &quot;#define&quot; (<a class="reference internal" href="#grammar-token-WhiteSpace"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpace</span></code></a>)+ <a class="reference internal" href="#grammar-token-MacroName"><code class="xref docutils literal notranslate"><span class="pre">MacroName</span></code></a>
                               (<a class="reference internal" href="#grammar-token-WhiteSpaceOrAnyComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrAnyComment</span></code></a>)* <a class="reference internal" href="#grammar-token-LineEnd"><code class="xref docutils literal notranslate"><span class="pre">LineEnd</span></code></a>
<strong id="grammar-token-PrepIfdef">PrepIfdef                </strong> ::=  <a class="reference internal" href="#grammar-token-LineBegin"><code class="xref docutils literal notranslate"><span class="pre">LineBegin</span></code></a> (<a class="reference internal" href="#grammar-token-WhiteSpaceOrCStyleComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrCStyleComment</span></code></a>)*
                               &quot;#ifdef&quot; (<a class="reference internal" href="#grammar-token-WhiteSpace"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpace</span></code></a>)+ <a class="reference internal" href="#grammar-token-MacroName"><code class="xref docutils literal notranslate"><span class="pre">MacroName</span></code></a>
                               (<a class="reference internal" href="#grammar-token-WhiteSpaceOrAnyComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrAnyComment</span></code></a>)* <a class="reference internal" href="#grammar-token-LineEnd"><code class="xref docutils literal notranslate"><span class="pre">LineEnd</span></code></a>
<strong id="grammar-token-PrepElse">PrepElse                 </strong> ::=  <a class="reference internal" href="#grammar-token-LineBegin"><code class="xref docutils literal notranslate"><span class="pre">LineBegin</span></code></a> (<a class="reference internal" href="#grammar-token-WhiteSpaceOrCStyleComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrCStyleComment</span></code></a>)*
                               &quot;#else&quot; (<a class="reference internal" href="#grammar-token-WhiteSpaceOrAnyComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrAnyComment</span></code></a>)* <a class="reference internal" href="#grammar-token-LineEnd"><code class="xref docutils literal notranslate"><span class="pre">LineEnd</span></code></a>
<strong id="grammar-token-PrepEndif">PrepEndif                </strong> ::=  <a class="reference internal" href="#grammar-token-LineBegin"><code class="xref docutils literal notranslate"><span class="pre">LineBegin</span></code></a> (<a class="reference internal" href="#grammar-token-WhiteSpaceOrCStyleComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrCStyleComment</span></code></a>)*
                               &quot;#endif&quot; (<a class="reference internal" href="#grammar-token-WhiteSpaceOrAnyComment"><code class="xref docutils literal notranslate"><span class="pre">WhiteSpaceOrAnyComment</span></code></a>)* <a class="reference internal" href="#grammar-token-LineEnd"><code class="xref docutils literal notranslate"><span class="pre">LineEnd</span></code></a>
<strong id="grammar-token-PrepRegContentException">PrepRegContentException  </strong> ::=  <a class="reference internal" href="#grammar-token-PrepIfdef"><code class="xref docutils literal notranslate"><span class="pre">PrepIfdef</span></code></a> | <a class="reference internal" href="#grammar-token-PrepElse"><code class="xref docutils literal notranslate"><span class="pre">PrepElse</span></code></a> | <a class="reference internal" href="#grammar-token-PrepEndif"><code class="xref docutils literal notranslate"><span class="pre">PrepEndif</span></code></a> | EOF
<strong id="grammar-token-PrepRegion">PrepRegion               </strong> ::=  .* - <a class="reference internal" href="#grammar-token-PrepRegContentException"><code class="xref docutils literal notranslate"><span class="pre">PrepRegContentException</span></code></a>
                              | <a class="reference internal" href="#grammar-token-PrepIfdef"><code class="xref docutils literal notranslate"><span class="pre">PrepIfdef</span></code></a>
                                (<a class="reference internal" href="#grammar-token-PrepRegion"><code class="xref docutils literal notranslate"><span class="pre">PrepRegion</span></code></a>)*
                                [<a class="reference internal" href="#grammar-token-PrepElse"><code class="xref docutils literal notranslate"><span class="pre">PrepElse</span></code></a>]
                                (<a class="reference internal" href="#grammar-token-PrepRegion"><code class="xref docutils literal notranslate"><span class="pre">PrepRegion</span></code></a>)*
                                <a class="reference internal" href="#grammar-token-PrepEndif"><code class="xref docutils literal notranslate"><span class="pre">PrepEndif</span></code></a>
</pre>
<p><a class="reference internal" href="#grammar-token-PrepRegion"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepRegion</span></code></a> may occur anywhere in a TD file, as long as it matches
the grammar specification.</p>
<p><a class="reference internal" href="#grammar-token-PrepDefine"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepDefine</span></code></a> allows defining a <a class="reference internal" href="#grammar-token-MacroName"><code class="xref std std-token docutils literal notranslate"><span class="pre">MacroName</span></code></a> so that any following
<a class="reference internal" href="#grammar-token-PrepIfdef"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepIfdef</span></code></a> - <a class="reference internal" href="#grammar-token-PrepElse"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepElse</span></code></a> preprocessing region part and
<a class="reference internal" href="#grammar-token-PrepIfdef"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepIfdef</span></code></a> - <a class="reference internal" href="#grammar-token-PrepEndif"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepEndif</span></code></a> preprocessing region
are enabled for TableGen tokens parsing.</p>
<p>A preprocessing region, starting (i.e. having its <a class="reference internal" href="#grammar-token-PrepIfdef"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepIfdef</span></code></a>) in a file,
must end (i.e. have its <a class="reference internal" href="#grammar-token-PrepEndif"><code class="xref std std-token docutils literal notranslate"><span class="pre">PrepEndif</span></code></a>) in the same file.</p>
<p>A <a class="reference internal" href="#grammar-token-MacroName"><code class="xref std std-token docutils literal notranslate"><span class="pre">MacroName</span></code></a> may be defined externally by using <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">-D&lt;NAME&gt;</span> <span class="pre">}</span></code>
option of TableGen.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="總索引"
             >索引</a></li>
        <li class="right" >
          <a href="LangIntro.html" title="TableGen Language Introduction"
             >下一頁</a> |</li>
        <li class="right" >
          <a href="BackEnds.html" title="TableGen BackEnds"
             >上一頁</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="../UserGuides.html" >使用者指南</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >TableGen</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">TableGen Language Reference</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; 版權所有 2003-2025, LLVM Project.
      最後更新於 2025-10-28。
      使用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3 建立。
    </div>
  </body>
</html>