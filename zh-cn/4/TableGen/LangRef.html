
<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>TableGen Language Reference &#8212; LLVM 4 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../_static/llvm-theme.css?v=4c4af0c1" />
    <script src="../_static/documentation_options.js?v=216745eb"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/llvm-docs-l10n/TableGen/LangRef.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="TableGen Language Introduction" href="LangIntro.html" />
    <link rel="prev" title="TableGen BackEnds" href="BackEnds.html" />
<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>
<div class="logo">
  <a href="../index.html">
    <img src="../_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="LangIntro.html" title="TableGen Language Introduction"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="BackEnds.html" title="TableGen BackEnds"
             accesskey="P">上一页</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">TableGen</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">TableGen Language Reference</a></li> 
      </ul>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="tablegen-language-reference">
<h1>TableGen Language Reference<a class="headerlink" href="#tablegen-language-reference" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#notation" id="id4">Notation</a></p></li>
<li><p><a class="reference internal" href="#lexical-analysis" id="id5">Lexical Analysis</a></p></li>
<li><p><a class="reference internal" href="#syntax" id="id6">Syntax</a></p>
<ul>
<li><p><a class="reference internal" href="#classes" id="id7"><code class="docutils literal notranslate"><span class="pre">class</span></code>es</a></p></li>
<li><p><a class="reference internal" href="#declarations" id="id8">Declarations</a></p></li>
<li><p><a class="reference internal" href="#types" id="id9">Types</a></p></li>
<li><p><a class="reference internal" href="#values" id="id10">Values</a></p></li>
<li><p><a class="reference internal" href="#bodies" id="id11">Bodies</a></p></li>
<li><p><a class="reference internal" href="#def" id="id12"><code class="docutils literal notranslate"><span class="pre">def</span></code></a></p></li>
<li><p><a class="reference internal" href="#defm" id="id13"><code class="docutils literal notranslate"><span class="pre">defm</span></code></a></p></li>
<li><p><a class="reference internal" href="#foreach" id="id14"><code class="docutils literal notranslate"><span class="pre">foreach</span></code></a></p></li>
<li><p><a class="reference internal" href="#top-level-let" id="id15">Top-Level <code class="docutils literal notranslate"><span class="pre">let</span></code></a></p></li>
<li><p><a class="reference internal" href="#multiclass" id="id16"><code class="docutils literal notranslate"><span class="pre">multiclass</span></code></a></p></li>
</ul>
</li>
</ul>
</nav>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This document is extremely rough. If you find something lacking, please
fix it, file a documentation bug, or ask about it on llvm-dev.</p>
</div>
<section id="introduction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document is meant to be a normative spec about the TableGen language
in and of itself (i.e. how to understand a given construct in terms of how
it affects the final set of records represented by the TableGen file). If
you are unsure if this document is really what you are looking for, please
read the <a class="reference internal" href="index.html"><span class="doc">introduction to TableGen</span></a> first.</p>
</section>
<section id="notation">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Notation</a><a class="headerlink" href="#notation" title="Link to this heading">¶</a></h2>
<p>The lexical and syntax notation used here is intended to imitate
<a class="reference external" href="http://docs.python.org/py3k/reference/introduction.html#notation">Python's</a>. In particular, for lexical definitions, the productions
operate at the character level and there is no implied whitespace between
elements. The syntax definitions operate at the token level, so there is
implied whitespace between tokens.</p>
</section>
<section id="lexical-analysis">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Lexical Analysis</a><a class="headerlink" href="#lexical-analysis" title="Link to this heading">¶</a></h2>
<p>TableGen supports BCPL (<code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">...</span></code>) and nestable C-style (<code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">*/</span></code>)
comments.</p>
<p>The following is a listing of the basic punctuation tokens:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- + [ ] { } ( ) &lt; &gt; : ; .  = ? #
</pre></div>
</div>
<p>Numeric literals take one of the following forms:</p>
<pre>
<strong id="grammar-token-TokInteger">TokInteger    </strong> ::=  <a class="reference internal" href="#grammar-token-DecimalInteger"><code class="xref docutils literal notranslate"><span class="pre">DecimalInteger</span></code></a> | <a class="reference internal" href="#grammar-token-HexInteger"><code class="xref docutils literal notranslate"><span class="pre">HexInteger</span></code></a> | <a class="reference internal" href="#grammar-token-BinInteger"><code class="xref docutils literal notranslate"><span class="pre">BinInteger</span></code></a>
<strong id="grammar-token-DecimalInteger">DecimalInteger</strong> ::=  [&quot;+&quot; | &quot;-&quot;] (&quot;0&quot;...&quot;9&quot;)+
<strong id="grammar-token-HexInteger">HexInteger    </strong> ::=  &quot;0x&quot; (&quot;0&quot;...&quot;9&quot; | &quot;a&quot;...&quot;f&quot; | &quot;A&quot;...&quot;F&quot;)+
<strong id="grammar-token-BinInteger">BinInteger    </strong> ::=  &quot;0b&quot; (&quot;0&quot; | &quot;1&quot;)+
</pre>
<p>One aspect to note is that the <a class="reference internal" href="#grammar-token-DecimalInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">DecimalInteger</span></code></a> token <em>includes</em> the
<code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code>, as opposed to having <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> be unary operators as
most languages do.</p>
<p>Also note that <a class="reference internal" href="#grammar-token-BinInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">BinInteger</span></code></a> creates a value of type <code class="docutils literal notranslate"><span class="pre">bits&lt;n&gt;</span></code>
(where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of bits).  This will implicitly convert to
integers when needed.</p>
<p>TableGen has identifier-like tokens:</p>
<pre>
<strong id="grammar-token-ualpha">ualpha       </strong> ::=  &quot;a&quot;...&quot;z&quot; | &quot;A&quot;...&quot;Z&quot; | &quot;_&quot;
<strong id="grammar-token-TokIdentifier">TokIdentifier</strong> ::=  (&quot;0&quot;...&quot;9&quot;)* <a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> (<a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> | &quot;0&quot;...&quot;9&quot;)*
<strong id="grammar-token-TokVarName">TokVarName   </strong> ::=  &quot;$&quot; <a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> (<a class="reference internal" href="#grammar-token-ualpha"><code class="xref docutils literal notranslate"><span class="pre">ualpha</span></code></a> |  &quot;0&quot;...&quot;9&quot;)*
</pre>
<p>Note that unlike most languages, TableGen allows <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> to
begin with a number. In case of ambiguity, a token will be interpreted as a
numeric literal rather than an identifier.</p>
<p>TableGen also has two string-like literals:</p>
<pre>
<strong id="grammar-token-TokString">TokString      </strong> ::=  '&quot;' &lt;non-'&quot;' characters and C-like escapes&gt; '&quot;'
<strong id="grammar-token-TokCodeFragment">TokCodeFragment</strong> ::=  &quot;[{&quot; &lt;shortest text not containing &quot;}]&quot;&gt; &quot;}]&quot;
</pre>
<p><a class="reference internal" href="#grammar-token-TokCodeFragment"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokCodeFragment</span></code></a> is essentially a multiline string literal
delimited by <code class="docutils literal notranslate"><span class="pre">[{</span></code> and <code class="docutils literal notranslate"><span class="pre">}]</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The current implementation accepts the following C-like escapes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\\ \<span class="s1">&#39; </span><span class="se">\&quot;</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> </span><span class="se">\n</span>
</pre></div>
</div>
</div>
<p>TableGen also has the following keywords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bit</span>   <span class="n">bits</span>      <span class="k">class</span><span class="w">   </span><span class="nc">code</span>         <span class="n">dag</span>
<span class="k">def</span><span class="w">   </span><span class="nf">foreach</span>   <span class="n">defm</span>    <span class="n">field</span>        <span class="ow">in</span>
<span class="nb">int</span>   <span class="n">let</span>       <span class="nb">list</span>    <span class="n">multiclass</span>   <span class="n">string</span>
</pre></div>
</div>
<p>TableGen also has &quot;bang operators&quot; which have a
wide variety of meanings:</p>
<pre>
<strong id="grammar-token-BangOperator">BangOperator</strong> ::=  one of
                 !eq     !if      !head    !tail      !con
                 !add    !shl     !sra     !srl       !and
                 !or     !empty   !subst   !foreach   !strconcat
                 !cast   !listconcat
</pre>
</section>
<section id="syntax">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Syntax</a><a class="headerlink" href="#syntax" title="Link to this heading">¶</a></h2>
<p>TableGen has an <code class="docutils literal notranslate"><span class="pre">include</span></code> mechanism. It does not play a role in the
syntax per se, since it is lexically replaced with the contents of the
included file.</p>
<pre>
<strong id="grammar-token-IncludeDirective">IncludeDirective</strong> ::=  &quot;include&quot; <a class="reference internal" href="#grammar-token-TokString"><code class="xref docutils literal notranslate"><span class="pre">TokString</span></code></a>
</pre>
<p>TableGen's top-level production consists of &quot;objects&quot;.</p>
<pre>
<strong id="grammar-token-TableGenFile">TableGenFile</strong> ::=  <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>*
<strong id="grammar-token-Object">Object      </strong> ::=  <a class="reference internal" href="#grammar-token-Class"><code class="xref docutils literal notranslate"><span class="pre">Class</span></code></a> | <a class="reference internal" href="#grammar-token-Def"><code class="xref docutils literal notranslate"><span class="pre">Def</span></code></a> | <a class="reference internal" href="#grammar-token-Defm"><code class="xref docutils literal notranslate"><span class="pre">Defm</span></code></a> | <a class="reference internal" href="#grammar-token-Let"><code class="xref docutils literal notranslate"><span class="pre">Let</span></code></a> | <a class="reference internal" href="#grammar-token-MultiClass"><code class="xref docutils literal notranslate"><span class="pre">MultiClass</span></code></a> | <a class="reference internal" href="#grammar-token-Foreach"><code class="xref docutils literal notranslate"><span class="pre">Foreach</span></code></a>
</pre>
<section id="classes">
<h3><a class="toc-backref" href="#id7" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">class</span></code>es</a><a class="headerlink" href="#classes" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Class">Class</strong> ::=  &quot;class&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a>] <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref docutils literal notranslate"><span class="pre">ObjectBody</span></code></a>
</pre>
<p>A <code class="docutils literal notranslate"><span class="pre">class</span></code> declaration creates a record which other records can inherit
from. A class can be parametrized by a list of &quot;template arguments&quot;, whose
values can be used in the class body.</p>
<p>A given class can only be defined once. A <code class="docutils literal notranslate"><span class="pre">class</span></code> declaration is
considered to define the class if any of the following is true:</p>
<ol class="arabic simple">
<li><p>The <a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref std std-token docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a> is present.</p></li>
<li><p>The <a class="reference internal" href="#grammar-token-Body"><code class="xref std std-token docutils literal notranslate"><span class="pre">Body</span></code></a> in the <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref std std-token docutils literal notranslate"><span class="pre">ObjectBody</span></code></a> is present and is not empty.</p></li>
<li><p>The <a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref std std-token docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> in the <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref std std-token docutils literal notranslate"><span class="pre">ObjectBody</span></code></a> is present.</p></li>
</ol>
<p>You can declare an empty class by giving and empty <a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref std std-token docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a>
and an empty <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref std std-token docutils literal notranslate"><span class="pre">ObjectBody</span></code></a>. This can serve as a restricted form of
forward declaration: note that records deriving from the forward-declared
class will inherit no fields from it since the record expansion is done
when the record is parsed.</p>
<pre>
<strong id="grammar-token-TemplateArgList">TemplateArgList</strong> ::=  &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a>)* &quot;&gt;&quot;
</pre>
</section>
<section id="declarations">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Declarations</a><a class="headerlink" href="#declarations" title="Link to this heading">¶</a></h3>
<p>The declaration syntax is pretty much what you would expect as a C++
programmer.</p>
<pre>
<strong id="grammar-token-Declaration">Declaration</strong> ::=  <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [&quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>]
</pre>
<p>It assigns the value to the identifier.</p>
</section>
<section id="types">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Types</a><a class="headerlink" href="#types" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Type">Type   </strong> ::=  &quot;string&quot; | &quot;code&quot; | &quot;bit&quot; | &quot;int&quot; | &quot;dag&quot;
            | &quot;bits&quot; &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a> &quot;&gt;&quot;
            | &quot;list&quot; &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> &quot;&gt;&quot;
            | <a class="reference internal" href="#grammar-token-ClassID"><code class="xref docutils literal notranslate"><span class="pre">ClassID</span></code></a>
<strong id="grammar-token-ClassID">ClassID</strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
</pre>
<p>Both <code class="docutils literal notranslate"><span class="pre">string</span></code> and <code class="docutils literal notranslate"><span class="pre">code</span></code> correspond to the string type; the difference
is purely to indicate programmer intention.</p>
<p>The <a class="reference internal" href="#grammar-token-ClassID"><code class="xref std std-token docutils literal notranslate"><span class="pre">ClassID</span></code></a> must identify a class that has been previously
declared or defined.</p>
</section>
<section id="values">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Values</a><a class="headerlink" href="#values" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Value">Value      </strong> ::=  <a class="reference internal" href="#grammar-token--8"><code class="xref docutils literal notranslate"><span class="pre">SimpleValue</span></code></a> <a class="reference internal" href="#grammar-token-ValueSuffix"><code class="xref docutils literal notranslate"><span class="pre">ValueSuffix</span></code></a>*
<strong id="grammar-token-ValueSuffix">ValueSuffix</strong> ::=  &quot;{&quot; <a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a> &quot;}&quot;
                | &quot;[&quot; <a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a> &quot;]&quot;
                | &quot;.&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
<strong id="grammar-token-RangeList">RangeList  </strong> ::=  <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref docutils literal notranslate"><span class="pre">RangePiece</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref docutils literal notranslate"><span class="pre">RangePiece</span></code></a>)*
<strong id="grammar-token-RangePiece">RangePiece </strong> ::=  <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
                | <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a> &quot;-&quot; <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
                | <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a> <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
</pre>
<p>The peculiar last form of <a class="reference internal" href="#grammar-token-RangePiece"><code class="xref std std-token docutils literal notranslate"><span class="pre">RangePiece</span></code></a> is due to the fact that the
&quot;<code class="docutils literal notranslate"><span class="pre">-</span></code>&quot; is included in the <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokInteger</span></code></a>, hence <code class="docutils literal notranslate"><span class="pre">1-5</span></code> gets lexed as
two consecutive <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokInteger</span></code></a>'s, with values <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">-5</span></code>,
instead of &quot;1&quot;, &quot;-&quot;, and &quot;5&quot;.
The <a class="reference internal" href="#grammar-token-RangeList"><code class="xref std std-token docutils literal notranslate"><span class="pre">RangeList</span></code></a> can be thought of as specifying &quot;list slice&quot; in some
contexts.</p>
<p><a class="reference internal" href="#grammar-token--8"><code class="xref std std-token docutils literal notranslate"><span class="pre">SimpleValue</span></code></a> has a number of forms:</p>
<pre>
<strong id="grammar-token-SimpleValue">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
</pre>
<p>The value will be the variable referenced by the identifier. It can be one
of:</p>
<ul>
<li><p>name of a <code class="docutils literal notranslate"><span class="pre">def</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">Bar</span> <span class="p">:</span> <span class="n">SomeClass</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">X</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">Foo</span> <span class="p">{</span>
  <span class="n">SomeClass</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>value local to a <code class="docutils literal notranslate"><span class="pre">def</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">Foo</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Bar</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>a template arg of a <code class="docutils literal notranslate"><span class="pre">class</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="o">&lt;</span><span class="nb">int</span> <span class="n">Bar</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>value local to a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">multiclass</span> <span class="n">Foo</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Bar</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>a template arg to a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>, such as the use of <code class="docutils literal notranslate"><span class="pre">Bar</span></code> in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">multiclass</span> <span class="n">Foo</span><span class="o">&lt;</span><span class="nb">int</span> <span class="n">Bar</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nb">int</span> <span class="n">Baz</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<pre>
<strong id="grammar-token--0">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokInteger"><code class="xref docutils literal notranslate"><span class="pre">TokInteger</span></code></a>
</pre>
<p>This represents the numeric value of the integer.</p>
<pre>
<strong id="grammar-token--1">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokString"><code class="xref docutils literal notranslate"><span class="pre">TokString</span></code></a>+
</pre>
<p>Multiple adjacent string literals are concatenated like in C/C++. The value
is the concatenation of the strings.</p>
<pre>
<strong id="grammar-token--2">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-TokCodeFragment"><code class="xref docutils literal notranslate"><span class="pre">TokCodeFragment</span></code></a>
</pre>
<p>The value is the string value of the code fragment.</p>
<pre>
<strong id="grammar-token--3">SimpleValue</strong> ::=  &quot;?&quot;
</pre>
<p><code class="docutils literal notranslate"><span class="pre">?</span></code> represents an &quot;unset&quot; initializer.</p>
<pre>
<strong id="grammar-token--4">SimpleValue</strong> ::=  &quot;{&quot; <a class="reference internal" href="#grammar-token-ValueList"><code class="xref docutils literal notranslate"><span class="pre">ValueList</span></code></a> &quot;}&quot;
<strong id="grammar-token-ValueList">ValueList  </strong> ::=  [<a class="reference internal" href="#grammar-token-ValueListNE"><code class="xref docutils literal notranslate"><span class="pre">ValueListNE</span></code></a>]
<strong id="grammar-token-ValueListNE">ValueListNE</strong> ::=  <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>)*
</pre>
<p>This represents a sequence of bits, as would be used to initialize a
<code class="docutils literal notranslate"><span class="pre">bits&lt;n&gt;</span></code> field (where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of bits).</p>
<pre>
<strong id="grammar-token--5">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-ClassID"><code class="xref docutils literal notranslate"><span class="pre">ClassID</span></code></a> &quot;&lt;&quot; <a class="reference internal" href="#grammar-token-ValueListNE"><code class="xref docutils literal notranslate"><span class="pre">ValueListNE</span></code></a> &quot;&gt;&quot;
</pre>
<p>This generates a new anonymous record definition (as would be created by an
unnamed <code class="docutils literal notranslate"><span class="pre">def</span></code> inheriting from the given class with the given template
arguments) and the value is the value of that record definition.</p>
<pre>
<strong id="grammar-token--6">SimpleValue</strong> ::=  &quot;[&quot; <a class="reference internal" href="#grammar-token-ValueList"><code class="xref docutils literal notranslate"><span class="pre">ValueList</span></code></a> &quot;]&quot; [&quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> &quot;&gt;&quot;]
</pre>
<p>A list initializer. The optional <a class="reference internal" href="#grammar-token-Type"><code class="xref std std-token docutils literal notranslate"><span class="pre">Type</span></code></a> can be used to indicate a
specific element type, otherwise the element type will be deduced from the
given values.</p>
<pre>
<strong id="grammar-token--7">SimpleValue</strong> ::=  &quot;(&quot; <a class="reference internal" href="#grammar-token-DagArg"><code class="xref docutils literal notranslate"><span class="pre">DagArg</span></code></a> <a class="reference internal" href="#grammar-token-DagArgList"><code class="xref docutils literal notranslate"><span class="pre">DagArgList</span></code></a> &quot;)&quot;
<strong id="grammar-token-DagArgList">DagArgList </strong> ::=  <a class="reference internal" href="#grammar-token-DagArg"><code class="xref docutils literal notranslate"><span class="pre">DagArg</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-DagArg"><code class="xref docutils literal notranslate"><span class="pre">DagArg</span></code></a>)*
<strong id="grammar-token-DagArg">DagArg     </strong> ::=  <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> [&quot;:&quot; <a class="reference internal" href="#grammar-token-TokVarName"><code class="xref docutils literal notranslate"><span class="pre">TokVarName</span></code></a>] | <a class="reference internal" href="#grammar-token-TokVarName"><code class="xref docutils literal notranslate"><span class="pre">TokVarName</span></code></a>
</pre>
<p>The initial <a class="reference internal" href="#grammar-token-DagArg"><code class="xref std std-token docutils literal notranslate"><span class="pre">DagArg</span></code></a> is called the &quot;operator&quot; of the dag.</p>
<pre>
<strong id="grammar-token--8">SimpleValue</strong> ::=  <a class="reference internal" href="#grammar-token-BangOperator"><code class="xref docutils literal notranslate"><span class="pre">BangOperator</span></code></a> [&quot;&lt;&quot; <a class="reference internal" href="#grammar-token-Type"><code class="xref docutils literal notranslate"><span class="pre">Type</span></code></a> &quot;&gt;&quot;] &quot;(&quot; <a class="reference internal" href="#grammar-token-ValueListNE"><code class="xref docutils literal notranslate"><span class="pre">ValueListNE</span></code></a> &quot;)&quot;
</pre>
</section>
<section id="bodies">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Bodies</a><a class="headerlink" href="#bodies" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-ObjectBody">ObjectBody     </strong> ::=  <a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> <a class="reference internal" href="#grammar-token-Body"><code class="xref docutils literal notranslate"><span class="pre">Body</span></code></a>
<strong id="grammar-token-BaseClassList">BaseClassList  </strong> ::=  [&quot;:&quot; <a class="reference internal" href="#grammar-token-BaseClassListNE"><code class="xref docutils literal notranslate"><span class="pre">BaseClassListNE</span></code></a>]
<strong id="grammar-token-BaseClassListNE">BaseClassListNE</strong> ::=  <a class="reference internal" href="#grammar-token-SubClassRef"><code class="xref docutils literal notranslate"><span class="pre">SubClassRef</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-SubClassRef"><code class="xref docutils literal notranslate"><span class="pre">SubClassRef</span></code></a>)*
<strong id="grammar-token-SubClassRef">SubClassRef    </strong> ::=  (<a class="reference internal" href="#grammar-token-ClassID"><code class="xref docutils literal notranslate"><span class="pre">ClassID</span></code></a> | <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref docutils literal notranslate"><span class="pre">MultiClassID</span></code></a>) [&quot;&lt;&quot; <a class="reference internal" href="#grammar-token-ValueList"><code class="xref docutils literal notranslate"><span class="pre">ValueList</span></code></a> &quot;&gt;&quot;]
<strong id="grammar-token-DefmID">DefmID         </strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
</pre>
<p>The version with the <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref std std-token docutils literal notranslate"><span class="pre">MultiClassID</span></code></a> is only valid in the
<a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref std std-token docutils literal notranslate"><span class="pre">BaseClassList</span></code></a> of a <code class="docutils literal notranslate"><span class="pre">defm</span></code>.
The <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref std std-token docutils literal notranslate"><span class="pre">MultiClassID</span></code></a> should be the name of a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>.</p>
<p>It is after parsing the base class list that the &quot;let stack&quot; is applied.</p>
<pre>
<strong id="grammar-token-Body">Body    </strong> ::=  &quot;;&quot; | &quot;{&quot; BodyList &quot;}&quot;
<strong id="grammar-token-BodyList">BodyList</strong> ::=  BodyItem*
<strong id="grammar-token-BodyItem">BodyItem</strong> ::=  <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a> &quot;;&quot;
             | &quot;let&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a>] &quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a> &quot;;&quot;
</pre>
<p>The <code class="docutils literal notranslate"><span class="pre">let</span></code> form allows overriding the value of an inherited field.</p>
</section>
<section id="def">
<h3><a class="toc-backref" href="#id12" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">def</span></code></a><a class="headerlink" href="#def" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Def">Def</strong> ::=  &quot;def&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> <a class="reference internal" href="#grammar-token-ObjectBody"><code class="xref docutils literal notranslate"><span class="pre">ObjectBody</span></code></a>
</pre>
<p>Defines a record whose name is given by the <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref std std-token docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>. The
fields of the record are inherited from the base classes and defined in the
body.</p>
<p>Special handling occurs if this <code class="docutils literal notranslate"><span class="pre">def</span></code> appears inside a <code class="docutils literal notranslate"><span class="pre">multiclass</span></code> or
a <code class="docutils literal notranslate"><span class="pre">foreach</span></code>.</p>
</section>
<section id="defm">
<h3><a class="toc-backref" href="#id13" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">defm</span></code></a><a class="headerlink" href="#defm" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Defm">Defm</strong> ::=  &quot;defm&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-BaseClassListNE"><code class="xref docutils literal notranslate"><span class="pre">BaseClassListNE</span></code></a> &quot;;&quot;
</pre>
<p>Note that in the <a class="reference internal" href="#grammar-token-BaseClassList"><code class="xref std std-token docutils literal notranslate"><span class="pre">BaseClassList</span></code></a>, all of the <code class="docutils literal notranslate"><span class="pre">multiclass</span></code>'s must
precede any <code class="docutils literal notranslate"><span class="pre">class</span></code>'s that appear.</p>
</section>
<section id="foreach">
<h3><a class="toc-backref" href="#id14" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">foreach</span></code></a><a class="headerlink" href="#foreach" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Foreach">Foreach</strong> ::=  &quot;foreach&quot; <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a> &quot;in&quot; &quot;{&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>* &quot;}&quot;
            | &quot;foreach&quot; <a class="reference internal" href="#grammar-token-Declaration"><code class="xref docutils literal notranslate"><span class="pre">Declaration</span></code></a> &quot;in&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>
</pre>
<p>The value assigned to the variable in the declaration is iterated over and
the object or object list is reevaluated with the variable set at each
iterated value.</p>
</section>
<section id="top-level-let">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Top-Level <code class="docutils literal notranslate"><span class="pre">let</span></code></a><a class="headerlink" href="#top-level-let" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-Let">Let    </strong> ::=   &quot;let&quot; <a class="reference internal" href="#grammar-token-LetList"><code class="xref docutils literal notranslate"><span class="pre">LetList</span></code></a> &quot;in&quot; &quot;{&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>* &quot;}&quot;
            | &quot;let&quot; <a class="reference internal" href="#grammar-token-LetList"><code class="xref docutils literal notranslate"><span class="pre">LetList</span></code></a> &quot;in&quot; <a class="reference internal" href="#grammar-token-Object"><code class="xref docutils literal notranslate"><span class="pre">Object</span></code></a>
<strong id="grammar-token-LetList">LetList</strong> ::=  <a class="reference internal" href="#grammar-token-LetItem"><code class="xref docutils literal notranslate"><span class="pre">LetItem</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-LetItem"><code class="xref docutils literal notranslate"><span class="pre">LetItem</span></code></a>)*
<strong id="grammar-token-LetItem">LetItem</strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-RangeList"><code class="xref docutils literal notranslate"><span class="pre">RangeList</span></code></a>] &quot;=&quot; <a class="reference internal" href="#grammar-token-Value"><code class="xref docutils literal notranslate"><span class="pre">Value</span></code></a>
</pre>
<p>This is effectively equivalent to <code class="docutils literal notranslate"><span class="pre">let</span></code> inside the body of a record
except that it applies to multiple records at a time. The bindings are
applied at the end of parsing the base classes of a record.</p>
</section>
<section id="multiclass">
<h3><a class="toc-backref" href="#id16" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">multiclass</span></code></a><a class="headerlink" href="#multiclass" title="Link to this heading">¶</a></h3>
<pre>
<strong id="grammar-token-MultiClass">MultiClass        </strong> ::=  &quot;multiclass&quot; <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a> [<a class="reference internal" href="#grammar-token-TemplateArgList"><code class="xref docutils literal notranslate"><span class="pre">TemplateArgList</span></code></a>]
                        [&quot;:&quot; <a class="reference internal" href="#grammar-token-BaseMultiClassList"><code class="xref docutils literal notranslate"><span class="pre">BaseMultiClassList</span></code></a>] &quot;{&quot; <a class="reference internal" href="#grammar-token-MultiClassObject"><code class="xref docutils literal notranslate"><span class="pre">MultiClassObject</span></code></a>+ &quot;}&quot;
<strong id="grammar-token-BaseMultiClassList">BaseMultiClassList</strong> ::=  <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref docutils literal notranslate"><span class="pre">MultiClassID</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-MultiClassID"><code class="xref docutils literal notranslate"><span class="pre">MultiClassID</span></code></a>)*
<strong id="grammar-token-MultiClassID">MultiClassID      </strong> ::=  <a class="reference internal" href="#grammar-token-TokIdentifier"><code class="xref docutils literal notranslate"><span class="pre">TokIdentifier</span></code></a>
<strong id="grammar-token-MultiClassObject">MultiClassObject  </strong> ::=  <a class="reference internal" href="#grammar-token-Def"><code class="xref docutils literal notranslate"><span class="pre">Def</span></code></a> | <a class="reference internal" href="#grammar-token-Defm"><code class="xref docutils literal notranslate"><span class="pre">Defm</span></code></a> | <a class="reference internal" href="#grammar-token-Let"><code class="xref docutils literal notranslate"><span class="pre">Let</span></code></a> | <a class="reference internal" href="#grammar-token-Foreach"><code class="xref docutils literal notranslate"><span class="pre">Foreach</span></code></a>
</pre>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="LangIntro.html" title="TableGen Language Introduction"
             >下一页</a> |</li>
        <li class="right" >
          <a href="BackEnds.html" title="TableGen BackEnds"
             >上一页</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >TableGen</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">TableGen Language Reference</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; 版权所有 2003-2025, LLVM Project.
      最后更新于 2025-10-28.
      由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3创建。
    </div>
  </body>
</html>