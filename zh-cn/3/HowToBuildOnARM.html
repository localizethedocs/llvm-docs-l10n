
<!DOCTYPE html>

<html lang="zh-CN" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How To Build On ARM &#8212; LLVM 3.9 文档</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=4c4af0c1" />
    <script src="_static/documentation_options.js?v=9016a3c2"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/llvm-docs-l10n/HowToBuildOnARM.html" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="How To Cross-Compile Clang/LLVM using Clang/LLVM" href="HowToCrossCompileLLVM.html" />
    <link rel="prev" title="Advanced Build Configurations" href="AdvancedBuilds.html" />
<script type="text/javascript" src="ltd-provenance.js"></script>
<script type="text/javascript" src="ltd-current.js"></script>
<script type="text/javascript" src="../../ltd-config.js"></script>
<script type="text/javascript" src="../../ltd-flyout.js"></script>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="HowToCrossCompileLLVM.html" title="How To Cross-Compile Clang/LLVM using Clang/LLVM"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="AdvancedBuilds.html" title="Advanced Build Configurations"
             accesskey="P">上一页</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

        <li class="nav-item nav-item-this"><a href="">How To Build On ARM</a></li> 
      </ul>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="how-to-build-on-arm">
<h1>How To Build On ARM<a class="headerlink" href="#how-to-build-on-arm" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains information about building/testing LLVM and
Clang on an ARM machine.</p>
<p>This document is <em>NOT</em> tailored to help you cross-compile LLVM/Clang
to ARM on another architecture, for example an x86_64 machine. To find
out more about cross-compiling, please check <a class="reference internal" href="HowToCrossCompileLLVM.html"><span class="doc">How To Cross-Compile Clang/LLVM using Clang/LLVM</span></a>.</p>
</section>
<section id="notes-on-building-llvm-clang-on-arm">
<h2>Notes On Building LLVM/Clang on ARM<a class="headerlink" href="#notes-on-building-llvm-clang-on-arm" title="Link to this heading">¶</a></h2>
<p>Here are some notes on building/testing LLVM/Clang on ARM. Note that
ARM encompasses a wide variety of CPUs; this advice is primarily based
on the ARMv6 and ARMv7 architectures and may be inapplicable to older chips.</p>
<ol class="arabic">
<li><p>The most popular Linaro/Ubuntu OS's for ARM boards, e.g., the
Pandaboard, have become hard-float platforms. There are a number of
choices when using CMake. Autoconf usage is deprecated as of 3.8.</p>
<p>Building LLVM/Clang in <code class="docutils literal notranslate"><span class="pre">Relese</span></code> mode is preferred since it consumes
a lot less memory. Otherwise, the building process will very likely
fail due to insufficient memory. It's also a lot quicker to only build
the relevant back-ends (ARM and AArch64), since it's very unlikely that
you'll use an ARM board to cross-compile to other arches. If you're
running Compiler-RT tests, also include the x86 back-end, or some tests
will fail.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span><span class="nv">$LLVM_SRC_DIR</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release<span class="w"> </span><span class="se">\</span>
<span class="w">                    </span>-DLLVM_TARGETS_TO_BUILD<span class="o">=</span><span class="s2">&quot;ARM;X86;AArch64&quot;</span>
</pre></div>
</div>
<p>Other options you can use are:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Use<span class="w"> </span>Ninja<span class="w"> </span>instead<span class="w"> </span>of<span class="w"> </span>Make:<span class="w"> </span><span class="s2">&quot;-G Ninja&quot;</span>
Build<span class="w"> </span>with<span class="w"> </span>assertions<span class="w"> </span>on:<span class="w"> </span><span class="s2">&quot;-DLLVM_ENABLE_ASSERTIONS=True&quot;</span>
Force<span class="w"> </span>Python2:<span class="w"> </span><span class="s2">&quot;-DPYTHON_EXECUTABLE=/usr/bin/python2&quot;</span>
Local<span class="w"> </span><span class="o">(</span>non-sudo<span class="o">)</span><span class="w"> </span>install<span class="w"> </span>path:<span class="w"> </span><span class="s2">&quot;-DCMAKE_INSTALL_PREFIX=</span><span class="nv">$HOME</span><span class="s2">/llvm/instal&quot;</span>
CPU<span class="w"> </span>flags:<span class="w"> </span><span class="s2">&quot;DCMAKE_C_FLAGS=-mcpu=cortex-a15&quot;</span><span class="w"> </span><span class="o">(</span>same<span class="w"> </span><span class="k">for</span><span class="w"> </span>CXX_FLAGS<span class="o">)</span>
</pre></div>
</div>
<p>After that, just typing <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-jN</span></code> or <code class="docutils literal notranslate"><span class="pre">ninja</span></code> will build everything.
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-jN</span> <span class="pre">check-all</span></code> or <code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">check-all</span></code> will run all compiler tests. For
running the test suite, please refer to <a class="reference internal" href="TestingGuide.html"><span class="doc">LLVM Testing Infrastructure Guide</span></a>.</p>
</li>
<li><p>If you are building LLVM/Clang on an ARM board with 1G of memory or less,
please use <code class="docutils literal notranslate"><span class="pre">gold</span></code> rather then GNU <code class="docutils literal notranslate"><span class="pre">ld</span></code>. In any case it is probably a good
idea to set up a swap partition, too.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>ln<span class="w"> </span>-sf<span class="w"> </span>/usr/bin/ld<span class="w"> </span>/usr/bin/ld.gold
</pre></div>
</div>
</li>
<li><p>ARM development boards can be unstable and you may experience that cores
are disappearing, caches being flushed on every big.LITTLE switch, and
other similar issues.  To help ease the effect of this, set the Linux
scheduler to &quot;performance&quot; on <strong>all</strong> cores using this little script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># The code below requires the package &#39;cpufrequtils&#39; to be installed.</span>
<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">cpu</span><span class="o">=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span>cpu&lt;<span class="sb">`</span>grep<span class="w"> </span>-c<span class="w"> </span>proc<span class="w"> </span>/proc/cpuinfo<span class="sb">`</span><span class="p">;</span><span class="w"> </span>cpu++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>sudo<span class="w"> </span>cpufreq-set<span class="w"> </span>-c<span class="w"> </span><span class="nv">$cpu</span><span class="w"> </span>-g<span class="w"> </span>performance
<span class="k">done</span>
</pre></div>
</div>
<p>Remember to turn that off after the build, or you may risk burning your
CPU. Most modern kernels don't need that, so only use it if you have
problems.</p>
</li>
<li><p>Running the build on SD cards is ok, but they are more prone to failures
than good quality USB sticks, and those are more prone to failures than
external hard-drives (those are also a lot faster). So, at least, you
should consider to buy a fast USB stick.  On systems with a fast eMMC,
that's a good option too.</p></li>
<li><p>Make sure you have a decent power supply (dozens of dollars worth) that can
provide <em>at least</em> 4 amperes, this is especially important if you use USB
devices with your board. Externally powered USB/SATA harddrives are even
better than having a good power supply.</p></li>
</ol>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="HowToCrossCompileLLVM.html" title="How To Cross-Compile Clang/LLVM using Clang/LLVM"
             >下一页</a> |</li>
        <li class="right" >
          <a href="AdvancedBuilds.html" title="Advanced Build Configurations"
             >上一页</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

        <li class="nav-item nav-item-this"><a href="">How To Build On ARM</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; 版权所有 2003-2025, LLVM Project.
      最后更新于 2025-10-28.
      由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3创建。
    </div>
  </body>
</html>